2025-06-14 15:47:10,037 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/signup
2025-06-14 15:47:10,243 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-14 15:56:27,578 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-14 16:00:23,276 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-14 16:00:23,364 | ERROR | HTTPException: Requires roles: admin
2025-06-14 16:02:33,646 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-14 16:03:49,524 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-14 16:10:26,570 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-14 16:10:26,579 | WARNING | Product creation failed: 'nivea body lotion' already exists.
2025-06-14 16:10:26,580 | ERROR | Error occurred while creating product.
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 25, in create_products
    raise HTTPException(status_code=400, detail="Product already exists")
fastapi.exceptions.HTTPException: 400: Product already exists
2025-06-14 16:10:26,601 | ERROR | HTTPException: Internal Server Error
2025-06-14 16:17:34,857 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-14 16:17:34,991 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 42, in create_products
    |     setup_logging.exception("Error occurred while creating product.")
    |     ^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'function' object has no attribute 'exception'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 42, in create_products
    setup_logging.exception("Error occurred while creating product.")
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'exception'
2025-06-14 16:24:26,443 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-14 16:24:26,524 | WARNING | Product creation failed: 'Apple macbook pro' already exists.
2025-06-14 16:24:26,524 | ERROR | Error occurred while creating product.
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 25, in create_products
    raise HTTPException(status_code=400, detail="Product already exists")
fastapi.exceptions.HTTPException: 400: Product already exists
2025-06-14 16:24:26,527 | ERROR | HTTPException: Internal Server Error
2025-06-14 16:28:19,366 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-14 16:28:19,483 | WARNING | Product creation failed: 'Apple macbook pro' already exists.
2025-06-14 16:28:19,487 | ERROR | HTTPException: Product already exists
2025-06-14 17:44:24,751 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products
2025-06-14 17:44:24,804 | ERROR | HTTPException: Could not validate credentials
2025-06-14 17:45:01,030 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products
2025-06-14 17:45:01,808 | INFO | Admin admin@gmail.com accessed product list: skip=0, limit=10, total=4
2025-06-14 17:49:29,785 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products/2
2025-06-14 17:49:29,970 | INFO | Access Log: IP=Admin-1, Method=GET, Path=/admin/products/2
2025-06-14 17:49:30,037 | INFO | Product fetched: ID=2 by Admin ID=1
2025-06-14 17:49:43,145 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products/5
2025-06-14 17:49:43,170 | INFO | Access Log: IP=Admin-1, Method=GET, Path=/admin/products/5
2025-06-14 17:49:43,174 | WARNING | Product not found for ID: 5
2025-06-14 17:49:43,209 | ERROR | Exception while fetching product by ID=5
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 90, in get_product_by_id
    raise HTTPException(status_code=404, detail="Product not found")
fastapi.exceptions.HTTPException: 404: Product not found
2025-06-14 17:49:43,227 | ERROR | HTTPException: Internal Server Error
2025-06-14 17:53:42,276 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products/5
2025-06-14 17:53:42,370 | INFO | Access Log: AdminID=1, Method=GET, Path=/admin/products/5
2025-06-14 17:53:42,377 | WARNING | Product not found for ID: 5
2025-06-14 17:53:42,379 | ERROR | HTTPException: Product not found
2025-06-14 17:54:50,655 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products/5
2025-06-14 17:54:50,753 | WARNING | Product not found for ID: 5
2025-06-14 17:54:50,755 | ERROR | HTTPException: Product not found
2025-06-14 18:00:34,295 | INFO | Access Log: IP=127.0.0.1, Method=PUT, Path=/admin/products/2
2025-06-14 18:00:34,437 | INFO | Product updated: ID=2 by AdminID=1
2025-06-14 18:00:57,821 | INFO | Access Log: IP=127.0.0.1, Method=PUT, Path=/admin/products/5
2025-06-14 18:00:57,828 | WARNING | Update failed: Product with ID 5 not found
2025-06-14 18:00:57,830 | ERROR | HTTPException: Product not found
2025-06-15 08:41:31,300 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 08:41:31,395 | ERROR | HTTPException: Could not validate credentials
2025-06-15 08:41:44,758 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 08:41:44,853 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 08:42:18,567 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 08:43:22,793 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 09:15:59,866 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:15:59,930 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 09:16:00,323 | ERROR | HTTPException: Invalid  password
2025-06-15 09:16:16,417 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:16:16,770 | ERROR | HTTPException: Invalid  password
2025-06-15 09:16:25,938 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:16:26,340 | ERROR | HTTPException: Invalid  password
2025-06-15 09:17:04,654 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:17:05,032 | ERROR | HTTPException: Invalid  password
2025-06-15 09:17:13,651 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:17:14,112 | ERROR | HTTPException: Invalid  password
2025-06-15 09:17:35,481 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:17:35,489 | ERROR | HTTPException: Invalid  password
2025-06-15 09:17:52,094 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:17:52,100 | ERROR | HTTPException: Invalid  password
2025-06-15 09:18:57,861 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/signup
2025-06-15 09:19:23,815 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:19:55,962 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 09:20:01,988 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 09:20:10,485 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 09:22:12,079 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 09:22:46,479 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 09:23:36,658 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products
2025-06-15 09:23:36,667 | INFO | Admin admin@gmail.com accessed product list: skip=0, limit=10, total=4
2025-06-15 09:26:52,998 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders/3
2025-06-15 09:28:28,205 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/admin/products/3
2025-06-15 09:28:28,248 | ERROR | HTTPException: Could not validate credentials
2025-06-15 09:29:10,429 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:29:10,929 | ERROR | HTTPException: Invalid  password
2025-06-15 09:29:19,524 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 09:29:51,088 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/admin/products/3
2025-06-15 09:29:51,110 | ERROR | Exception while deleting product ID=3
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: update or delete on table "products" violates foreign key constraint "order_items_product_id_fkey" on table "order_items"
DETAIL:  Key (id)=(3) is still referenced from table "order_items".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 146, in delete_product
    db.commit()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 679, in execute
    util.preloaded.orm_persistence.delete_obj(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 193, in delete_obj
    _emit_delete_statements(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1465, in _emit_delete_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) update or delete on table "products" violates foreign key constraint "order_items_product_id_fkey" on table "order_items"
DETAIL:  Key (id)=(3) is still referenced from table "order_items".

[SQL: DELETE FROM products WHERE products.id = %(id)s]
[parameters: {'id': 3}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-15 09:29:51,310 | ERROR | HTTPException: Internal Server Error
2025-06-15 09:30:14,517 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/admin/products/2
2025-06-15 09:30:14,532 | ERROR | Exception while deleting product ID=2
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "product_id" of relation "cart" violates not-null constraint
DETAIL:  Failing row contains (5, 1, null, 1).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 146, in delete_product
    db.commit()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "product_id" of relation "cart" violates not-null constraint
DETAIL:  Failing row contains (5, 1, null, 1).

[SQL: UPDATE cart SET product_id=%(product_id)s WHERE cart.id = %(cart_id)s]
[parameters: {'product_id': None, 'cart_id': 5}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-15 09:30:14,540 | ERROR | HTTPException: Internal Server Error
2025-06-15 09:31:17,770 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/admin/products/4
2025-06-15 09:31:17,784 | INFO | Product deleted: ID=4, Name='Apple macbook pro', by AdminID=1
2025-06-15 09:31:28,031 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/admin/products/2
2025-06-15 09:31:28,039 | ERROR | Exception while deleting product ID=2
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "product_id" of relation "cart" violates not-null constraint
DETAIL:  Failing row contains (5, 1, null, 1).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 146, in delete_product
    db.commit()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "product_id" of relation "cart" violates not-null constraint
DETAIL:  Failing row contains (5, 1, null, 1).

[SQL: UPDATE cart SET product_id=%(product_id)s WHERE cart.id = %(cart_id)s]
[parameters: {'product_id': None, 'cart_id': 5}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-15 09:31:28,052 | ERROR | HTTPException: Internal Server Error
2025-06-15 10:33:09,945 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/products
2025-06-15 10:33:10,034 | INFO | Applying category filter: skin and body care
2025-06-15 10:33:10,035 | INFO | Applying min_price filter: 100.0
2025-06-15 10:33:10,036 | INFO | Sorting by: stock
2025-06-15 10:33:10,054 | INFO | Retrieved 3 product(s)
2025-06-15 10:52:39,511 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/products
2025-06-15 10:52:39,569 | INFO | Sorting by: price
2025-06-15 10:52:39,582 | INFO | Retrieved 3 product(s)
2025-06-15 10:54:05,935 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-15 10:54:06,091 | ERROR | HTTPException: Could not validate credentials
2025-06-15 10:54:55,832 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-15 10:54:55,919 | ERROR | Error occurred while creating product.
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 41, in create_products
    logger.info(f"Product created: ID {product.id} by admin ID: {user.id}")
                                       ^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ProductCreate' object has no attribute 'id'
2025-06-15 10:54:56,044 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 46, in create_products
    |     raise generic_exception_handler(status_code=500, detail="Internal Server Error")
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | TypeError: generic_exception_handler() got an unexpected keyword argument 'status_code'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\products\routes.py", line 46, in create_products
    raise generic_exception_handler(status_code=500, detail="Internal Server Error")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: generic_exception_handler() got an unexpected keyword argument 'status_code'
2025-06-15 10:58:09,417 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/admin/products
2025-06-15 10:58:09,498 | WARNING | Product creation failed: 'Apple macbook pro' already exists.
2025-06-15 10:58:09,499 | ERROR | HTTPException: Product already exists
2025-06-15 10:58:39,989 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products
2025-06-15 10:58:40,002 | INFO | Admin admin@gmail.com accessed product list: skip=0, limit=10, total=4
2025-06-15 11:56:01,420 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 11:56:01,559 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 68, in checkout
    |     logger.exception(f"Checkout error for user '{current_user['email']}': {str(e)}")
    |     ^^^^^^^^^^^^^^^^
    | AttributeError: module 'fastapi.logger' has no attribute 'exception'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 68, in checkout
    logger.exception(f"Checkout error for user '{current_user['email']}': {str(e)}")
    ^^^^^^^^^^^^^^^^
AttributeError: module 'fastapi.logger' has no attribute 'exception'
2025-06-15 11:58:10,237 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 11:58:10,292 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 68, in checkout
    |     logger.exception(f"Checkout error for user '{current_user['email']}': {str(e)}")
    |     ^^^^^^^^^^^^^^^^
    | AttributeError: module 'fastapi.logger' has no attribute 'exception'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 68, in checkout
    logger.exception(f"Checkout error for user '{current_user['email']}': {str(e)}")
    ^^^^^^^^^^^^^^^^
AttributeError: module 'fastapi.logger' has no attribute 'exception'
2025-06-15 11:58:59,285 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 11:58:59,382 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    |     logger.warning(f"Checkout failed: Cart is empty for user '{current_user['email']}'")
    |     ^^^^^^^^^^^^^^
    | AttributeError: module 'fastapi.logger' has no attribute 'warning'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    logger.warning(f"Checkout failed: Cart is empty for user '{current_user['email']}'")
    ^^^^^^^^^^^^^^
AttributeError: module 'fastapi.logger' has no attribute 'warning'
2025-06-15 11:59:36,233 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 11:59:36,320 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    |     logger.warning(f"Checkout failed: Cart is empty for user '{current_user['email']}'")
    |     ^^^^^^^^^^^^^^
    | AttributeError: module 'fastapi.logger' has no attribute 'warning'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    logger.warning(f"Checkout failed: Cart is empty for user '{current_user['email']}'")
    ^^^^^^^^^^^^^^
AttributeError: module 'fastapi.logger' has no attribute 'warning'
2025-06-15 11:59:45,639 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 11:59:45,736 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    |     logger.warning(f"Checkout failed: Cart is empty for user '{current_user['email']}'")
    |     ^^^^^^^^^^^^^^
    | AttributeError: module 'fastapi.logger' has no attribute 'warning'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    logger.warning(f"Checkout failed: Cart is empty for user '{current_user['email']}'")
    ^^^^^^^^^^^^^^
AttributeError: module 'fastapi.logger' has no attribute 'warning'
2025-06-15 12:00:08,487 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 12:00:08,606 | ERROR | HTTPException: {'error': True, 'message': 'Cart is empty', 'code': 400}
2025-06-15 12:28:18,049 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 12:28:18,134 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 22, in checkout
    |     logger.info(f"Checkout started by user ID: {current_user['id']}")
    |     ^^^^^^^^^^^
    | AttributeError: module 'fastapi.logger' has no attribute 'info'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 22, in checkout
    logger.info(f"Checkout started by user ID: {current_user['id']}")
    ^^^^^^^^^^^
AttributeError: module 'fastapi.logger' has no attribute 'info'
2025-06-15 12:29:42,228 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 12:29:42,323 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    |     logger.warning(f"Checkout failed: Cart is empty for user ID {current_user['id']}")
    |     ^^^^^^^^^^^^^^
    | AttributeError: module 'fastapi.logger' has no attribute 'warning'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 26, in checkout
    logger.warning(f"Checkout failed: Cart is empty for user ID {current_user['id']}")
    ^^^^^^^^^^^^^^
AttributeError: module 'fastapi.logger' has no attribute 'warning'
2025-06-15 12:31:06,818 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 12:31:06,908 | WARNING | Checkout failed: Cart is empty for user ID 5
2025-06-15 12:31:06,909 | ERROR | HTTPException: {'error': True, 'message': 'Cart is empty', 'code': 400}
2025-06-15 12:31:38,164 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 12:31:38,221 | INFO | Checkout process started by user ID: 5
2025-06-15 12:31:38,227 | WARNING | Checkout failed: Cart is empty for user ID 5
2025-06-15 12:31:38,230 | ERROR | HTTPException: {'error': True, 'message': 'Cart is empty', 'code': 400}
2025-06-15 12:35:14,910 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 12:35:14,968 | INFO | Fetching order history for user ID: 2
2025-06-15 12:35:14,989 | INFO | Found 2 orders for user ID: 2
2025-06-15 12:39:36,141 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 12:39:36,196 | INFO | Fetching order history for user ID: 2
2025-06-15 12:39:36,204 | INFO | Found 2 orders for user ID: 2
2025-06-15 12:41:32,374 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/signup
2025-06-15 12:41:32,397 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 12:42:13,521 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 12:42:46,442 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 12:42:46,454 | INFO | Fetching order history for user ID: 6
2025-06-15 12:42:46,457 | WARNING | No orders found for user ID: 6
2025-06-15 12:47:58,836 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 12:47:58,899 | INFO | Fetching order history for user ID: 6
2025-06-15 12:47:58,906 | WARNING | No orders found for user ID: 6  returning 204 No Content
2025-06-15 12:47:58,907 | ERROR | Failed to fetch order history for user ID: 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\orders_routes.py", line 29, in get_order_history
    return  Response(status_code=status.HTTP_204_NO_CONTENT)
            ^^^^^^^^
NameError: name 'Response' is not defined
2025-06-15 12:47:58,917 | ERROR | HTTPException: Internal Server Error
2025-06-15 12:48:01,515 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 12:48:01,523 | INFO | Fetching order history for user ID: 6
2025-06-15 12:48:01,526 | WARNING | No orders found for user ID: 6  returning 204 No Content
2025-06-15 12:48:01,529 | ERROR | Failed to fetch order history for user ID: 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\orders_routes.py", line 29, in get_order_history
    return  Response(status_code=status.HTTP_204_NO_CONTENT)
            ^^^^^^^^
NameError: name 'Response' is not defined
2025-06-15 12:48:01,551 | ERROR | HTTPException: Internal Server Error
2025-06-15 12:48:28,263 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 12:48:28,320 | INFO | Fetching order history for user ID: 6
2025-06-15 12:48:28,328 | WARNING | No orders found for user ID: 6  returning 204 No Content
2025-06-15 12:53:05,398 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders/3
2025-06-15 12:53:05,474 | INFO | Fetching order details: Order ID 3 for user ID 5
2025-06-15 12:53:05,487 | INFO | Order details retrieved successfully: Order ID 3 for user ID 5
2025-06-15 12:54:05,500 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders/1
2025-06-15 12:54:05,507 | INFO | Fetching order details: Order ID 1 for user ID 6
2025-06-15 12:54:05,510 | WARNING | Order not found: Order ID 1 for user ID 6
2025-06-15 12:54:05,511 | ERROR | Failed to fetch order details: Order ID 1 for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\orders_routes.py", line 61, in get_order_detail
    raise HTTPException(
fastapi.exceptions.HTTPException: 404: {'error': True, 'message': 'Order not found', 'code': 404}
2025-06-15 12:54:05,517 | ERROR | HTTPException: Internal Server Error
2025-06-15 12:54:54,542 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders/1
2025-06-15 12:54:54,615 | INFO | Fetching order details: Order ID 1 for user ID 6
2025-06-15 12:54:54,624 | WARNING | Order not found: Order ID 1 for user ID 6
2025-06-15 12:54:54,626 | ERROR | Failed to fetch order details: Order ID 1 for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\orders_routes.py", line 61, in get_order_detail
    return Response(
           ^^^^^^^^^
TypeError: Response.__init__() got an unexpected keyword argument 'detail'
2025-06-15 12:54:54,630 | ERROR | HTTPException: Internal Server Error
2025-06-15 12:55:38,322 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders/1
2025-06-15 12:55:38,391 | INFO | Fetching order details: Order ID 1 for user ID 6
2025-06-15 12:55:38,398 | WARNING | Order not found: Order ID 1 for user ID 6
2025-06-15 12:59:48,516 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders/1
2025-06-15 12:59:48,642 | INFO | Fetching order details: Order ID 1 for user ID 6
2025-06-15 12:59:48,652 | WARNING | Order not found: Order ID 1 for user ID 6
2025-06-15 13:01:19,941 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 13:01:20,379 | INFO | Fetching order history for user ID: 6
2025-06-15 13:01:20,455 | WARNING | No orders found for user ID: 6  returning 204 No Content
2025-06-15 13:01:20,496 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 179, in __call__
    |     await response(scope, wrapped_receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 217, in __call__
    |     await send({"type": "http.response.body", "body": chunk, "more_body": True})
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in _send
    |     await send(message)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 500, in send
    |     output = self.conn.send(event=h11.Data(data=data))
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_connection.py", line 538, in send
    |     data_list = self.send_with_data_passthrough(event)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_connection.py", line 571, in send_with_data_passthrough
    |     writer(event, data_list.append)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_writers.py", line 65, in __call__
    |     self.send_data(event.data, write)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_writers.py", line 91, in send_data
    |     raise LocalProtocolError("Too much data for declared Content-Length")
    | h11._util.LocalProtocolError: Too much data for declared Content-Length
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 179, in __call__
    await response(scope, wrapped_receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 217, in __call__
    await send({"type": "http.response.body", "body": chunk, "more_body": True})
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in _send
    await send(message)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 500, in send
    output = self.conn.send(event=h11.Data(data=data))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_connection.py", line 538, in send
    data_list = self.send_with_data_passthrough(event)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_connection.py", line 571, in send_with_data_passthrough
    writer(event, data_list.append)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_writers.py", line 65, in __call__
    self.send_data(event.data, write)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\h11\_writers.py", line 91, in send_data
    raise LocalProtocolError("Too much data for declared Content-Length")
h11._util.LocalProtocolError: Too much data for declared Content-Length
2025-06-15 13:03:16,162 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/orders
2025-06-15 13:03:16,246 | INFO | Fetching order history for user ID: 6
2025-06-15 13:03:16,254 | WARNING | No orders found for user ID: 6  returning 204 No Content
2025-06-15 17:53:54,388 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 17:53:54,502 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 17:54:25,766 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 17:54:25,791 | WARNING | Product not found: Product ID 4
2025-06-15 17:54:25,792 | ERROR | Failed to add to cart for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\cart\routes.py", line 28, in add_to_cart
    raise HTTPException(status_code=404, detail="Product not found")
fastapi.exceptions.HTTPException: 404: Product not found
2025-06-15 17:54:25,811 | ERROR | HTTPException: Internal Server Error
2025-06-15 17:54:44,454 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 17:54:44,471 | INFO | New cart item added: Product ID 1 x1 for user ID 6
2025-06-15 17:54:53,889 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 17:54:53,909 | INFO | New cart item added: Product ID 5 x1 for user ID 6
2025-06-15 17:55:04,239 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 17:55:04,245 | INFO | New cart item added: Product ID 3 x2 for user ID 6
2025-06-15 17:56:03,797 | INFO | Access Log: IP=127.0.0.1, Method=PUT, Path=/cart/1
2025-06-15 17:56:03,810 | INFO | Attempting to update product ID 1 in cart for user ID 6
2025-06-15 17:56:03,840 | INFO | Updated quantity to 3 for product ID 1 in cart of user ID 6
2025-06-15 17:56:41,937 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 17:56:41,944 | INFO | Fetching cart for user ID: 6
2025-06-15 17:56:41,946 | INFO | Cart contains 3 items for user ID: 6
2025-06-15 17:58:34,166 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products
2025-06-15 17:58:34,178 | ERROR | HTTPException: Requires roles: admin
2025-06-15 17:59:16,758 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/products
2025-06-15 17:59:16,763 | INFO | Sorting by: price
2025-06-15 17:59:16,772 | INFO | Retrieved 4 product(s)
2025-06-15 17:59:46,046 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 17:59:46,055 | INFO | Fetching cart for user ID: 6
2025-06-15 17:59:46,092 | INFO | Cart contains 3 items for user ID: 6
2025-06-15 18:01:27,782 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/cart/4
2025-06-15 18:01:27,786 | INFO | Attempting to remove product ID 4 from cart for user ID 6
2025-06-15 18:01:27,788 | WARNING | Cart item not found: Product ID 4 for user ID 6
2025-06-15 18:01:27,788 | ERROR | Error while removing product ID 4 from cart for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\cart\routes.py", line 106, in remove_from_cart
    raise HTTPException(status_code=404, detail="Cart item not found")
fastapi.exceptions.HTTPException: 404: Cart item not found
2025-06-15 18:01:27,790 | ERROR | HTTPException: Internal Server Error
2025-06-15 18:05:08,374 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/cart/4
2025-06-15 18:05:08,450 | INFO | Attempting to remove product ID 4 from cart for user ID 6
2025-06-15 18:05:08,456 | WARNING | Cart item not found: Product ID 4 for user ID 6
2025-06-15 18:05:08,457 | ERROR | Error while removing product ID 4 from cart for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\cart\routes.py", line 107, in remove_from_cart
    return create_error_response(status_code=404, detail="Cart item not found")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: create_error_response() got an unexpected keyword argument 'detail'
2025-06-15 18:05:08,460 | ERROR | HTTPException: Internal Server Error
2025-06-15 18:05:51,332 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/cart/4
2025-06-15 18:05:51,403 | INFO | Attempting to remove product ID 4 from cart for user ID 6
2025-06-15 18:05:51,414 | WARNING | Cart item not found: Product ID 4 for user ID 6
2025-06-15 18:08:26,043 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/cart/9
2025-06-15 18:08:26,098 | INFO | Attempting to remove product ID 9 from cart for user ID 6
2025-06-15 18:08:26,107 | WARNING | Cart item not found: Product ID 9 for user ID 6
2025-06-15 18:08:33,987 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/cart/10
2025-06-15 18:08:33,991 | INFO | Attempting to remove product ID 10 from cart for user ID 6
2025-06-15 18:08:33,993 | WARNING | Cart item not found: Product ID 10 for user ID 6
2025-06-15 18:08:45,438 | INFO | Access Log: IP=127.0.0.1, Method=DELETE, Path=/cart/3
2025-06-15 18:08:45,443 | INFO | Attempting to remove product ID 3 from cart for user ID 6
2025-06-15 18:08:45,460 | INFO | Successfully removed product ID 3 from cart for user ID 6
2025-06-15 18:09:13,219 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 18:09:13,225 | INFO | Fetching cart for user ID: 6
2025-06-15 18:09:13,229 | INFO | Cart contains 2 items for user ID: 6
2025-06-15 18:29:15,702 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 18:29:15,810 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 18:29:16,292 | INFO | User login successful for email: antrabandil@gmail.com, user_id: 6
2025-06-15 18:30:26,947 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 18:30:27,350 | WARNING | Invalid login credentials for email: antrabandil@gmail.com
2025-06-15 18:30:27,352 | ERROR | HTTPException: Invalid email or password
2025-06-15 18:30:58,605 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 18:30:58,958 | INFO | User login successful for email: antrabandil@gmail.com, user_id: 6
2025-06-15 19:32:29,609 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 19:32:29,732 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 19:32:30,233 | INFO | User login successful for email: antrabandil@gmail.com, user_id: 6
2025-06-15 19:34:11,326 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/auth/logout
2025-06-15 19:34:11,327 | INFO | Logout attempt initiated.
2025-06-15 19:34:11,328 | INFO | Logout successful. Tokens cleared from cookies.
2025-06-15 20:07:24,570 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/forgot-password
2025-06-15 20:07:24,597 | INFO | Password reset requested for email: antrabandil@gmail.com
2025-06-15 20:07:29,285 | INFO | Password reset token generated for user ID 6, email sent to antrabandil@gmail.com
2025-06-15 20:09:06,721 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/reset-password
2025-06-15 20:09:06,731 | WARNING | (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 20:09:25,318 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 20:09:25,678 | WARNING | Invalid login credentials for email: antrabandil@gmail.com
2025-06-15 20:09:25,681 | ERROR | HTTPException: Invalid email or password
2025-06-15 20:09:39,900 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/auth/login
2025-06-15 20:09:40,387 | INFO | User login successful for email: antrabandil@gmail.com, user_id: 6
2025-06-15 20:12:18,213 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:12:18,236 | INFO | New cart item added: Product ID 3 x2 for user ID 6
2025-06-15 20:12:31,757 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:12:31,768 | ERROR | Validation Error: [{'type': 'greater_than', 'loc': ('body', 'quantity'), 'msg': 'Input should be greater than 0', 'input': -2, 'ctx': {'gt': 0}}]
2025-06-15 20:12:56,010 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/products
2025-06-15 20:12:56,022 | INFO | Sorting by: price
2025-06-15 20:12:56,033 | INFO | Retrieved 4 product(s)
2025-06-15 20:13:34,090 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:13:34,104 | INFO | Updated cart: Added 50 more of product ID 5 for user ID 6
2025-06-15 20:13:43,484 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:13:43,490 | INFO | Updated cart: Added 58 more of product ID 5 for user ID 6
2025-06-15 20:16:10,493 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 20:16:10,497 | INFO | Fetching cart for user ID: 6
2025-06-15 20:16:10,499 | INFO | Cart contains 3 items for user ID: 6
2025-06-15 20:16:42,211 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 20:16:42,224 | INFO | Checkout process started by user ID: 6
2025-06-15 20:16:42,296 | INFO | Order placed successfully: Order ID 4 by user ID 6
2025-06-15 20:38:04,162 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 20:38:04,281 | INFO | Checkout process started by user ID: 6
2025-06-15 20:38:04,287 | WARNING | Checkout failed: Cart is empty for user ID 6
2025-06-15 20:38:04,289 | ERROR | HTTPException: {'error': True, 'message': 'Cart is empty', 'code': 400}
2025-06-15 20:38:28,522 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:38:28,541 | INFO | New cart item added: Product ID 5 x52 for user ID 6
2025-06-15 20:38:46,715 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 20:38:46,763 | INFO | Checkout process started by user ID: 6
2025-06-15 20:38:46,837 | ERROR | Checkout failed for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\orders\checkout_routes.py", line 51, in checkout
    f"Requested: {item.quantity}, Available: {product.quantity}  User ID: {current_user['id']}"
                                              ^^^^^^^^^^^^^^^^
AttributeError: 'Product' object has no attribute 'quantity'
2025-06-15 20:38:46,922 | ERROR | HTTPException: Internal Server Error
2025-06-15 20:39:39,045 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 20:39:39,102 | INFO | Checkout process started by user ID: 6
2025-06-15 20:39:39,117 | WARNING | Insufficient stock for Product ID 5  Requested: 52, Available: 50  User ID: 6
2025-06-15 20:41:49,648 | INFO | Access Log: IP=127.0.0.1, Method=PUT, Path=/cart/5
2025-06-15 20:41:49,654 | INFO | Attempting to update product ID 5 in cart for user ID 6
2025-06-15 20:41:49,670 | INFO | Updated quantity to 50 for product ID 5 in cart of user ID 6
2025-06-15 20:42:02,886 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/cart
2025-06-15 20:42:02,893 | INFO | Fetching cart for user ID: 6
2025-06-15 20:42:02,896 | INFO | Cart contains 1 items for user ID: 6
2025-06-15 20:42:38,144 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/checkout
2025-06-15 20:42:38,151 | INFO | Checkout process started by user ID: 6
2025-06-15 20:42:38,184 | INFO | Order placed successfully: Order ID 5 by user ID 6
2025-06-15 20:43:00,662 | INFO | Access Log: IP=127.0.0.1, Method=GET, Path=/admin/products/5
2025-06-15 20:43:00,673 | INFO | Product fetched successfully: ID=5 by AdminID=1
2025-06-15 20:43:22,542 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:43:22,575 | INFO | New cart item added: Product ID 5 x2 for user ID 6
2025-06-15 20:44:20,615 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:44:20,672 | WARNING | Invalid quantity 2 by user ID 6
2025-06-15 20:44:20,672 | ERROR | Failed to add to cart for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\cart\routes.py", line 33, in add_to_cart
    raise HTTPException(status_code=400, detail="Quantity must be greater than 0")
fastapi.exceptions.HTTPException: 400: Quantity must be greater than 0
2025-06-15 20:44:20,679 | ERROR | HTTPException: Internal Server Error
2025-06-15 20:44:43,381 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:44:43,453 | WARNING | Invalid quantity 2 by user ID 6
2025-06-15 20:44:43,459 | ERROR | Unhandled Exception
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 4 validation errors:
    |   {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}
    |   {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}
    |   {'type': 'missing', 'loc': ('response', 'product_id'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}
    |   {'type': 'missing', 'loc': ('response', 'quantity'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Users\gazal\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\app\middlewares\access_logger.py", line 13, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gazal\Downloads\EcommProject\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}
  {'type': 'missing', 'loc': ('response', 'product_id'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}
  {'type': 'missing', 'loc': ('response', 'quantity'), 'msg': 'Field required', 'input': HTTPException(status_code=400, detail='Quantity must be greater than 0')}

2025-06-15 20:45:57,665 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:45:57,793 | WARNING | Invalid quantity 2 by user ID 6
2025-06-15 20:45:57,794 | ERROR | Failed to add to cart for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\cart\routes.py", line 33, in add_to_cart
    return create_error_response(detail="Quantity must be greater than 0" ,status_code=400)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: create_error_response() got an unexpected keyword argument 'detail'
2025-06-15 20:45:57,798 | ERROR | HTTPException: Internal Server Error
2025-06-15 20:46:12,347 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:46:12,354 | WARNING | Invalid quantity 2 by user ID 6
2025-06-15 20:46:12,355 | ERROR | Failed to add to cart for user ID 6
Traceback (most recent call last):
  File "C:\Users\gazal\Downloads\EcommProject\app\cart\routes.py", line 33, in add_to_cart
    return create_error_response(detail="Quantity must be greater than 0" ,status_code=400)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: create_error_response() got an unexpected keyword argument 'detail'
2025-06-15 20:46:12,362 | ERROR | HTTPException: Internal Server Error
2025-06-15 20:47:51,568 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:47:51,925 | WARNING | Invalid quantity 2 by user ID 6
2025-06-15 20:49:17,625 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:49:17,755 | WARNING | Invalid quantity 0 by user ID 6
2025-06-15 20:50:07,099 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:50:07,470 | WARNING | Product stock is0 not available, by user ID 6
2025-06-15 20:51:22,301 | INFO | Access Log: IP=127.0.0.1, Method=POST, Path=/cart
2025-06-15 20:51:22,312 | WARNING | Product stock is0 not available, by user ID 6
